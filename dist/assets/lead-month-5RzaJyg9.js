import{r as t,a as v,e as L,j as e,D as S,p as b,aC as I,q as u,aY as y,n as A,u as E,I as M,aH as D,H as N,C as R}from"./index-BtB7UOt2.js";import{C as k}from"./custom-breadcrumbs-DhW774YS.js";import{u as B,T as H,a as V,b as F,c as _,d as g,e as r,f as O,g as W,C as q}from"./table-pagination-custom-GsxC9MhW.js";import{C as z}from"./Card-DnppY8CG.js";import{T as G}from"./TextField-DxmO3TN0.js";import{I as U}from"./InputAdornment-BvyjvqD-.js";import{a as Y}from"./Select-BfbTOkoI.js";import"./KeyboardArrowRight-CNgXDUW1.js";import"./FormControlLabel-BSJAInse.js";import"./formControlState-Dq1zat_P.js";import"./isMuiElement-B37rc9mm.js";const m=[{id:"id",label:"Lead ID"},{id:"name",label:"Name"},{id:"mobile",label:"Mobile No"},{id:"actions",label:"Actions",width:88}];function $(){const a=B({defaultRowsPerPage:5}),[s,i]=t.useState([]),[c,x]=t.useState(!1),[C,f]=t.useState(0),[d,P]=t.useState(""),h=t.useCallback(async(n=a.page,l=a.rowsPerPage,T=d)=>{var p;try{x(!0);const o=await v.get(L.user.monthleads,{params:{page:n+1,page_size:l,search:T||""}}),j=Array.isArray(o.data)?o.data:((p=o.data.results)==null?void 0:p.data)||[];i(j),f(o.data.count||j.length)}catch(o){console.error("Error fetching months leads:",o)}finally{x(!1)}},[a.page,a.rowsPerPage,d]);t.useEffect(()=>{h()},[h]);const w=n=>{const l=n.target.value;P(l),a.onChangePage(null,0),h(0,a.rowsPerPage,l)};return e.jsxs(S,{children:[e.jsx(k,{heading:"Months Leads",links:[{name:"Dashboard",href:b.dashboard.root},{name:"Months Leads"},{name:"View"}],sx:{mb:{xs:3,md:3}}}),e.jsxs(z,{children:[e.jsx(I,{direction:"row",spacing:2,sx:{p:2},children:e.jsx(G,{fullWidth:!0,placeholder:"Search by name or mobile",value:d,onChange:w,InputProps:{startAdornment:e.jsx(U,{position:"start",children:e.jsx(u,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),e.jsx(y,{children:e.jsx(H,{sx:{minWidth:800},children:e.jsxs(V,{children:[e.jsx(F,{headLabel:m}),e.jsx(_,{children:c?e.jsx(g,{children:e.jsx(r,{colSpan:m.length,align:"center",children:"Loading..."})}):s.length>0?s.map(n=>e.jsx(J,{row:n},n.id)):e.jsx(g,{children:e.jsx(r,{colSpan:m.length,align:"center",children:"No leads found."})})})]})})}),e.jsx(O,{page:a.page,count:C,rowsPerPage:a.rowsPerPage,onPageChange:a.onChangePage,onRowsPerPageChange:a.onChangeRowsPerPage})]})]})}function J({row:a}){const s=W();A();const i=E(),c=()=>{s.onClose(),i(b.dashboard.Allleadview(a.id))};return e.jsxs(e.Fragment,{children:[e.jsxs(g,{hover:!0,children:[e.jsx(r,{children:a.id}),e.jsx(r,{children:a.name}),e.jsx(r,{children:a.mobile_number}),e.jsx(r,{align:"right",children:e.jsx(M,{onClick:s.onOpen,children:e.jsx(u,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(q,{open:s.open,anchorEl:s.anchorEl,onClose:s.onClose,children:e.jsx(Y,{children:e.jsxs(D,{onClick:c,children:[e.jsx(u,{icon:"solar:eye-bold"}),"View"]})})})]})}const K={title:`User View | Dashboard - ${R.appName}`};function ie(){return e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsxs("title",{children:[" ",K.title]})}),e.jsx($,{})]})}export{ie as default};
