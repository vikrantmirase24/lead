import{r as l,u as b,j as t,D as y,B as e,T as g,p as d,a as m,e as f,H as j,C as w}from"./index-BtB7UOt2.js";import{G as a}from"./Grid2-Cl1-Wni4.js";import{C as c}from"./Card-DnppY8CG.js";import"./isMuiElement-B37rc9mm.js";function k(){l.useState(0);const[h,u]=l.useState({name:""}),i=b(),[n,x]=l.useState({total:0,active:0,deactive:0,today_followup:0,today_lead:0,month_lead:0});function p(r){try{return JSON.parse(atob(r.split(".")[1]))}catch(o){return console.error("Invalid token",o),null}}return l.useEffect(()=>{const r=sessionStorage.getItem("access_token");if(!r){console.error("No access token found");return}const o=p(r),s=(o==null?void 0:o.name)||(o==null?void 0:o.full_name)||"";if(!s){console.error("No name");return}u({name:s})},[]),l.useEffect(()=>{let r=!0;return(async()=>{try{const{data:s}=await m.get(f.user.leadcount);r&&x({total:s.total_enquiries_count||0,active:s.total_active_count||0,deactive:s.total_closed_count||0,today_followup:s.today_followup_count||0,today_lead:s.today_created_count||0,month_lead:s.current_month_count||0})}catch(s){console.error("Error fetching lead counts:",s)}})(),()=>{r=!1}},[]),t.jsxs(y,{maxWidth:"xl",children:[t.jsx(e,{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",mb:2,children:t.jsxs(g,{variant:"h5",fontWeight:"bold",children:["Welcome Back , ",h.name||"User"]})}),t.jsxs(a,{container:!0,spacing:3,children:[t.jsx(a,{xs:12,md:3,children:t.jsxs(c,{sx:{borderRadius:2,p:3,width:1},children:[t.jsx(e,{sx:{mb:1.5,typography:"subtitle2",opacity:.48},children:"Total Leads"}),t.jsx(e,{sx:{typography:"h4"},children:n.total}),t.jsx(e,{sx:{position:"absolute",bottom:16,right:16,width:32,height:32,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,boxShadow:2,cursor:"pointer",transition:"background 0.2s","&:hover":{bgcolor:"success.dark"}},onClick:()=>i(d.dashboard.alleledslist),children:"→"})]})}),t.jsx(a,{xs:12,md:3,children:t.jsxs(c,{sx:{borderRadius:2,p:3,width:1},children:[t.jsx(e,{sx:{mb:1.5,typography:"subtitle2",opacity:.48},children:"Active Leads"}),t.jsx(e,{sx:{typography:"h4"},children:n.active}),t.jsx(e,{sx:{position:"absolute",bottom:16,right:16,width:32,height:32,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,boxShadow:2,cursor:"pointer",transition:"background 0.2s","&:hover":{bgcolor:"success.dark"}},onClick:()=>i(d.dashboard.activeledslist),children:"→"})]})}),t.jsx(a,{xs:12,md:3,children:t.jsxs(c,{sx:{borderRadius:2,p:3,width:1},children:[t.jsx(e,{sx:{mb:1.5,typography:"subtitle2",opacity:.48},children:"Closed Leads"}),t.jsx(e,{sx:{typography:"h4"},children:n.deactive}),t.jsx(e,{sx:{position:"absolute",bottom:16,right:16,width:32,height:32,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,boxShadow:2,cursor:"pointer",transition:"background 0.2s","&:hover":{bgcolor:"success.dark"}},onClick:()=>i(d.dashboard.closeledslist),children:"→"})]})}),t.jsx(a,{xs:12,md:3,children:t.jsxs(c,{sx:{borderRadius:2,p:3,width:1},children:[t.jsx(e,{sx:{mb:1.5,typography:"subtitle2",opacity:.48},children:"Todays Followup Leads"}),t.jsx(e,{sx:{typography:"h4"},children:n.today_followup}),t.jsx(e,{sx:{position:"absolute",bottom:16,right:16,width:32,height:32,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,boxShadow:2,cursor:"pointer",transition:"background 0.2s","&:hover":{bgcolor:"success.dark"}},onClick:()=>i(d.dashboard.todayfollowuplist),children:"→"})]})}),t.jsx(a,{xs:12,md:3,children:t.jsxs(c,{sx:{borderRadius:2,p:3,width:1},children:[t.jsx(e,{sx:{mb:1.5,typography:"subtitle2",opacity:.48},children:"Todays Leads"}),t.jsx(e,{sx:{typography:"h4"},children:n.today_lead}),t.jsx(e,{sx:{position:"absolute",bottom:16,right:16,width:32,height:32,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,boxShadow:2,cursor:"pointer",transition:"background 0.2s","&:hover":{bgcolor:"success.dark"}},onClick:()=>i(d.dashboard.todayledslist),children:"→"})]})}),t.jsx(a,{xs:12,md:3,children:t.jsxs(c,{sx:{borderRadius:2,p:3,width:1},children:[t.jsx(e,{sx:{mb:1.5,typography:"subtitle2",opacity:.48},children:"Leads In Month"}),t.jsx(e,{sx:{typography:"h4"},children:n.month_lead}),t.jsx(e,{sx:{position:"absolute",bottom:16,right:16,width:32,height:32,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,boxShadow:2,cursor:"pointer",transition:"background 0.2s","&:hover":{bgcolor:"success.dark"}},onClick:()=>i(d.dashboard.monthledslist),children:"→"})]})})]})]})}const _={title:`DashBoard ! | Success - ${w.appName}`};function I(){return t.jsxs(t.Fragment,{children:[t.jsx(j,{children:t.jsxs("title",{children:[" ",_.title]})}),t.jsx(k,{})]})}export{I as default};
