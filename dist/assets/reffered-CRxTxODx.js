import{r as o,a as w,e as T,j as e,D as v,p,aC as R,q as u,aY as S,n as I,u as L,I as E,aH as y,H as A,C as D}from"./index-BtB7UOt2.js";import{C as N}from"./custom-breadcrumbs-DhW774YS.js";import{u as k,T as B,a as H,b as V,c as F,d as x,e as r,f as M,g as O,C as W}from"./table-pagination-custom-GsxC9MhW.js";import{C as _}from"./Card-DnppY8CG.js";import{T as q}from"./TextField-DxmO3TN0.js";import{I as z}from"./InputAdornment-BvyjvqD-.js";import{a as G}from"./Select-BfbTOkoI.js";import"./KeyboardArrowRight-CNgXDUW1.js";import"./FormControlLabel-BSJAInse.js";import"./formControlState-Dq1zat_P.js";import"./isMuiElement-B37rc9mm.js";const m=[{id:"id",label:"Lead ID"},{id:"name",label:"Name"},{id:"mobile",label:"Mobile No"},{id:"actions",label:"Actions",width:88}];function U(){const a=k({defaultRowsPerPage:5}),[s,i]=o.useState([]),[c,g]=o.useState(!1),[f,j]=o.useState(0),[d,b]=o.useState(""),h=o.useCallback(async(n=a.page,t=a.rowsPerPage,P=d)=>{try{g(!0);const l=await w.get(T.user.refferedleads,{params:{page:n+1,page_size:t,search:P||""}});i(l.data.results||[]),j(l.data.count||0)}catch(l){console.error("Error fetching reffered leads:",l)}finally{g(!1)}},[a.page,a.rowsPerPage,d]);o.useEffect(()=>{h()},[h]);const C=n=>{const t=n.target.value;b(t),a.onChangePage(null,0),h(0,a.rowsPerPage,t)};return e.jsxs(v,{children:[e.jsx(N,{heading:"Reffered List",links:[{name:"Dashboard",href:p.dashboard.root},{name:"Reffered List"},{name:"View"}],sx:{mb:{xs:3,md:3}}}),e.jsxs(_,{children:[e.jsx(R,{direction:"row",spacing:2,sx:{p:2},children:e.jsx(q,{fullWidth:!0,placeholder:"Search by name or mobile",value:d,onChange:C,InputProps:{startAdornment:e.jsx(z,{position:"start",children:e.jsx(u,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),e.jsx(S,{children:e.jsx(B,{sx:{minWidth:800},children:e.jsxs(H,{children:[e.jsx(V,{headLabel:m}),e.jsx(F,{children:c?e.jsx(x,{children:e.jsx(r,{colSpan:m.length,align:"center",children:"Loading..."})}):s.length>0?s.map(n=>e.jsx(Y,{row:n},n.id)):e.jsx(x,{children:e.jsx(r,{colSpan:m.length,align:"center",children:"No leads found."})})})]})})}),e.jsx(M,{page:a.page,count:f,rowsPerPage:a.rowsPerPage,onPageChange:a.onChangePage,onRowsPerPageChange:a.onChangeRowsPerPage})]})]})}function Y({row:a}){const s=O();I();const i=L(),c=()=>{s.onClose(),i(p.dashboard.Allleadview(a.id))};return e.jsxs(e.Fragment,{children:[e.jsxs(x,{hover:!0,children:[e.jsx(r,{children:a.id}),e.jsx(r,{children:a.name}),e.jsx(r,{children:a.mobile}),e.jsx(r,{align:"right",children:e.jsx(E,{onClick:s.onOpen,children:e.jsx(u,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(W,{open:s.open,anchorEl:s.anchorEl,onClose:s.onClose,children:e.jsx(G,{children:e.jsxs(y,{onClick:c,children:[e.jsx(u,{icon:"solar:eye-bold"}),"View"]})})})]})}const $={title:`User View | Dashboard - ${D.appName}`};function te(){return e.jsxs(e.Fragment,{children:[e.jsx(A,{children:e.jsxs("title",{children:[" ",$.title]})}),e.jsx(U,{})]})}export{te as default};
