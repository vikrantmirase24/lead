import{r as i,j as e,D as S,p as m,aC as w,c as v,R as D,q as l,aY as A,n as E,I as F,aH as y,a as p,e as x,H as L,C as R}from"./index-BtB7UOt2.js";import{C as k}from"./confirm-dialog-DGukidWh.js";import{C as B}from"./custom-breadcrumbs-DhW774YS.js";import{u as H,T as N,a as _,b as z,c as M,d as g,e as c,f as O,g as V,C as W}from"./table-pagination-custom-GsxC9MhW.js";import{C as q}from"./Card-DnppY8CG.js";import{T as G}from"./TextField-DxmO3TN0.js";import{I as U}from"./InputAdornment-BvyjvqD-.js";import{C as Y}from"./CircularProgress-Dtxp3OJV.js";import{a as $}from"./Select-BfbTOkoI.js";import"./Dialog-DBgaWhmn.js";import"./KeyboardArrowRight-CNgXDUW1.js";import"./FormControlLabel-BSJAInse.js";import"./formControlState-Dq1zat_P.js";import"./isMuiElement-B37rc9mm.js";const h=[{id:"id",label:"ID"},{id:"name",label:"Product Name"},{id:"actions",label:"",width:88}];function J(){const a=H({defaultRowsPerPage:5}),[n,s]=i.useState(""),[o,d]=i.useState([]),[u,j]=i.useState(!1),[I,P]=i.useState(0),f=async(r="",C=1,b=5)=>{j(!0);try{let t;r.trim()?t=await p.get(x.user.searchProduct,{params:{search:r,page:C,page_size:b}}):t=await p.get(x.user.allProduct,{params:{page:C,page_size:b}});const T=Array.isArray(t.data)?t.data:t.data.results||t.data.data||[];d(T),P(t.data.count||T.length)}catch(t){console.error("Failed to fetch products:",t),d([]),P(0)}finally{j(!1)}};return i.useEffect(()=>{f(n,a.page+1,a.rowsPerPage)},[n,a.page,a.rowsPerPage]),e.jsxs(S,{children:[e.jsx(B,{heading:"Product List",links:[{name:"Dashboard",href:m.dashboard.root},{name:"Product"},{name:"List"}],action:e.jsx(w,{direction:"row",spacing:2,children:e.jsx(v,{sx:{mt:5},component:D,variant:"contained",href:m.dashboard.productadd,startIcon:e.jsx(l,{icon:"mingcute:add-line"}),children:"Add Product"})}),sx:{mb:{xs:3,md:3}}}),e.jsxs(q,{children:[e.jsx(w,{direction:"row",spacing:2,sx:{p:2},children:e.jsx(G,{fullWidth:!0,placeholder:"Search by Product name",value:n,onChange:r=>s(r.target.value),InputProps:{startAdornment:e.jsx(U,{position:"start",children:e.jsx(l,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),e.jsx(A,{children:e.jsx(N,{sx:{minWidth:800},children:e.jsxs(_,{children:[e.jsx(z,{headLabel:h}),e.jsx(M,{children:u?e.jsx(g,{children:e.jsx(c,{colSpan:h.length,align:"center",children:e.jsx(Y,{size:24})})}):o.length>0?o.map(r=>e.jsx(K,{row:r,onDeleteSuccess:()=>f(n,a.page+1,a.rowsPerPage)},r.id)):e.jsx(g,{children:e.jsx(c,{colSpan:h.length,align:"center",children:"No data found"})})})]})})}),e.jsx(O,{page:a.page,count:I,rowsPerPage:a.rowsPerPage,onPageChange:a.onChangePage,onRowsPerPageChange:a.onChangeRowsPerPage})]})]})}function K({row:a,onDeleteSuccess:n}){const s=V(),o=E(),d=async()=>{try{await p.delete(x.user.deleteProduct(a.id)),o.onFalse(),s.onClose(),n()}catch(u){console.error("Failed to delete product:",u)}};return e.jsxs(e.Fragment,{children:[e.jsxs(g,{hover:!0,children:[e.jsx(c,{children:a.id}),e.jsx(c,{children:a.name}),e.jsx(c,{align:"right",children:e.jsx(F,{onClick:s.onOpen,children:e.jsx(l,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(W,{open:s.open,anchorEl:s.anchorEl,onClose:s.onClose,children:e.jsxs($,{children:[e.jsxs(y,{component:D,to:m.dashboard.productedit(a.id),children:[e.jsx(l,{icon:"solar:pen-bold"}),"Edit"]}),e.jsxs(y,{onClick:o.onTrue,children:[e.jsx(l,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})}),e.jsx(k,{open:o.value,onClose:o.onFalse,title:"Delete Product",content:"Are you sure you want to delete this Product?",action:e.jsx(v,{variant:"contained",color:"error",onClick:d,children:"Delete"})})]})}const Q={title:`User View | Dashboard - ${R.appName}`};function he(){return e.jsxs(e.Fragment,{children:[e.jsx(L,{children:e.jsxs("title",{children:[" ",Q.title]})}),e.jsx(J,{})]})}export{he as default};
