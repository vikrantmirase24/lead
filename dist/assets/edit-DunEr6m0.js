import{r as u,u as R,aZ as L,j as t,D as E,p as l,A as d,aC as h,T as F,c as g,R as T,a as j,e as b,H as _,C as w}from"./index-BtB7UOt2.js";import{C as D}from"./custom-breadcrumbs-DhW774YS.js";import{C as N}from"./Card-DnppY8CG.js";import{T as v}from"./TextField-DxmO3TN0.js";import"./Select-BfbTOkoI.js";import"./isMuiElement-B37rc9mm.js";import"./formControlState-Dq1zat_P.js";function S(){const[s,f]=u.useState([{from:"",to:""}]),[i,r]=u.useState(""),[p,m]=u.useState(""),y=R(),{id:c}=L();u.useEffect(()=>{(async()=>{try{const o=(await j.get(b.user.getLoanAmount(c),{})).data.data;f([{from:o.loan_amount_from,to:o.loan_amount_to}])}catch(e){console.error(e),r("Failed to fetch loan amount range.")}})()},[c]);const x=(n,e,o)=>{const a=[...s];a[n][e]=o,f(a)},C=async n=>{if(n.preventDefault(),s.find(a=>!a.from||!a.to)){r('Please fill all "From" and "To" amounts.'),m("");return}if(s.find(a=>Number(a.from)>Number(a.to))){r('"From Amount" should not be greater than "To Amount".'),m("");return}try{const{from:a,to:A}=s[0];await j.patch(b.user.editLoanAmount(c),{loan_amount_from:Number(a),loan_amount_to:Number(A)}),m("Loan amount range updated successfully!"),r(""),setTimeout(()=>y(l.dashboard.loanamtlist),1500)}catch(a){console.error("Error:",a),r("Failed to update loan amount range."),m("")}};return t.jsxs(E,{children:[t.jsx(D,{heading:"Edit Loan Amount Range",links:[{name:"Dashboard",href:l.dashboard.root},{name:"Loan Amount"},{name:"Edit"}],sx:{mb:{xs:3,md:3}}}),!!p&&t.jsx(d,{severity:"success",sx:{mb:3},children:p}),!!i&&t.jsx(d,{severity:"error",sx:{mb:2},children:i}),t.jsx(N,{sx:{p:4},children:t.jsx("form",{children:t.jsxs(h,{spacing:3,children:[t.jsx(F,{variant:"h6",children:"Loan Amount Range"}),i&&t.jsx(d,{severity:"error",children:i}),s.map((n,e)=>t.jsxs(h,{direction:"row",spacing:2,children:[t.jsx(v,{label:"From Amount",type:"number",value:n.from,onChange:o=>x(e,"from",o.target.value),fullWidth:!0}),t.jsx(v,{label:"To Amount",type:"number",value:n.to,onChange:o=>x(e,"to",o.target.value),fullWidth:!0})]},e)),t.jsxs(h,{direction:"row",spacing:2,justifyContent:"flex-end",children:[t.jsx(g,{variant:"outlined",component:T,href:l.dashboard.loanamtlist,children:"Cancel"}),t.jsx(g,{variant:"contained",onClick:C,children:"Update Loan Amount"})]})]})})})]})}const k={title:`User View | Dashboard - ${w.appName}`};function W(){return t.jsxs(t.Fragment,{children:[t.jsx(_,{children:t.jsxs("title",{children:[" ",k.title]})}),t.jsx(S,{})]})}export{W as default};
