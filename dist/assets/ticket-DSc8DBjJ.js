import{r as o,a as k,e as w,j as e,D as y,p as b,aC as S,q as c,aY as v,n as D,u as I,I as L,aH as j,H as E,C as A}from"./index-BtB7UOt2.js";import{C as B}from"./custom-breadcrumbs-DhW774YS.js";import{u as R,T as V,a as _,b as F,c as H,d as g,e as t,f as N,g as $,C as M}from"./table-pagination-custom-GsxC9MhW.js";import{C as O}from"./Card-DnppY8CG.js";import{T as U}from"./TextField-DxmO3TN0.js";import{I as W}from"./InputAdornment-BvyjvqD-.js";import{a as q}from"./Select-BfbTOkoI.js";import"./KeyboardArrowRight-CNgXDUW1.js";import"./FormControlLabel-BSJAInse.js";import"./formControlState-Dq1zat_P.js";import"./isMuiElement-B37rc9mm.js";const u=[{id:"title",label:"Title"},{id:"description",label:"Description"},{id:"attachment",label:"Attachment"},{id:"priority",label:"Priority"},{id:"status",label:"Status"},{id:"actions",label:"Actions",width:88}];function z(){const a=R({defaultRowsPerPage:5}),[s,d]=o.useState([]),[h,r]=o.useState(!1),[p,f]=o.useState(0),[m,C]=o.useState(""),x=o.useCallback(async(n=a.page,i=a.rowsPerPage,T=m)=>{try{r(!0);const l=await k.get(w.user.Ticketleads,{params:{page:n+1,page_size:i,search:T||""}});d(l.data.results||[]),f(l.data.count||0)}catch(l){console.error("Error fetching Ticket leads:",l)}finally{r(!1)}},[a.page,a.rowsPerPage,m]);o.useEffect(()=>{x()},[x]);const P=n=>{const i=n.target.value;C(i),a.onChangePage(null,0),x(0,a.rowsPerPage,i)};return e.jsxs(y,{children:[e.jsx(B,{heading:"Ticket List",links:[{name:"Dashboard",href:b.dashboard.root},{name:"Ticket List"},{name:"View"}],sx:{mb:{xs:3,md:3}}}),e.jsxs(O,{children:[e.jsx(S,{direction:"row",spacing:2,sx:{p:2},children:e.jsx(U,{fullWidth:!0,placeholder:"Search by name or mobile",value:m,onChange:P,InputProps:{startAdornment:e.jsx(W,{position:"start",children:e.jsx(c,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),e.jsx(v,{children:e.jsx(V,{sx:{minWidth:800},children:e.jsxs(_,{children:[e.jsx(F,{headLabel:u}),e.jsx(H,{children:h?e.jsx(g,{children:e.jsx(t,{colSpan:u.length,align:"center",children:"Loading..."})}):s.length>0?s.map(n=>e.jsx(Y,{row:n},n.id)):e.jsx(g,{children:e.jsx(t,{colSpan:u.length,align:"center",children:"No leads found."})})})]})})}),e.jsx(N,{page:a.page,count:p,rowsPerPage:a.rowsPerPage,onPageChange:a.onChangePage,onRowsPerPageChange:a.onChangeRowsPerPage})]})]})}const G="https://lead.berarfinance.com/leadapi/media/";function Y({row:a}){const s=$(),d=D(),h=I(),r=()=>{s.onClose(),h(b.dashboard.TicketViewByid(a.id))},p=()=>{s.onClose(),d.onFalse(),alert(`Deleted ticket ${a.title} (ID: ${a.id})`)};return e.jsxs(e.Fragment,{children:[e.jsxs(g,{hover:!0,children:[e.jsx(t,{children:a.title}),e.jsx(t,{children:a.description}),e.jsx(t,{children:a.attachment?e.jsx("a",{href:`${G}${a.attachment}`,target:"_blank",rel:"noopener noreferrer",children:"View"}):"No Attachment"}),e.jsx(t,{children:a.priority_display}),e.jsx(t,{children:a.status_display}),e.jsx(t,{align:"right",children:e.jsx(L,{onClick:s.onOpen,children:e.jsx(c,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(M,{open:s.open,anchorEl:s.anchorEl,onClose:s.onClose,children:e.jsxs(q,{children:[e.jsxs(j,{onClick:r,children:[e.jsx(c,{icon:"solar:eye-bold"}),"View"]}),e.jsxs(j,{onClick:p,children:[e.jsx(c,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})})]})}const J={title:`User View | Dashboard - ${A.appName}`};function ie(){return e.jsxs(e.Fragment,{children:[e.jsx(E,{children:e.jsxs("title",{children:[" ",J.title]})}),e.jsx(z,{})]})}export{ie as default};
