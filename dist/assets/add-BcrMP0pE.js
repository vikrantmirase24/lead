import{r as u,u as y,j as t,D as C,p as l,A as c,aC as h,T as R,c as f,R as T,a as w,e as N,H as F,C as L}from"./index-BtB7UOt2.js";import{C as S}from"./custom-breadcrumbs-DhW774YS.js";import{C as D}from"./Card-DnppY8CG.js";import{T as g}from"./TextField-DxmO3TN0.js";import"./Select-BfbTOkoI.js";import"./isMuiElement-B37rc9mm.js";import"./formControlState-Dq1zat_P.js";function k(){const[a,d]=u.useState([{from:"",to:""}]),[m,n]=u.useState(""),[p,i]=u.useState(""),j=y(),x=(o,r,s)=>{const e=[...a];e[o][r]=s,d(e)},A=()=>{const o=a[a.length-1],r=Number(o.from),s=Number(o.to);if(!o.from||!o.to){n("Please fill both From and To amounts before adding a new row."),setTimeout(()=>{n("")},3e3);return}if(r>s){n('"From Amount" should not be greater than "To Amount".'),setTimeout(()=>{n("")},3e3);return}n(""),d([...a,{from:"",to:""}])},v=async o=>{if(o.preventDefault(),a.find(e=>!e.from||!e.to)){n('Please fill all "From" and "To" amounts.'),i("");return}if(a.find(e=>Number(e.from)>Number(e.to))){n('"From Amount" should not be greater than "To Amount".'),i("");return}try{await a.reduce((e,b)=>e.then(()=>w.post(N.user.addLoanAmount,{loan_amount_from:Number(b.from),loan_amount_to:Number(b.to)})),Promise.resolve()),d([{from:"",to:""}]),n(""),i("Loan Amount Range(s) added successfully!"),setTimeout(()=>j(l.dashboard.loanamtlist),1500)}catch(e){console.error("Error:",e),n("Failed to add loan amount range(s)."),i("")}};return t.jsxs(C,{children:[t.jsx(S,{heading:"Add Loan Amount Range",links:[{name:"Dashboard",href:l.dashboard.root},{name:"Loan Amount"},{name:"Add"}],sx:{mb:{xs:3,md:3}}}),!!p&&t.jsx(c,{severity:"success",sx:{mb:3},children:p}),!!m&&t.jsx(c,{severity:"error",sx:{mb:2},children:m}),t.jsx(D,{sx:{p:4,mt:2},children:t.jsx("form",{onSubmit:v,children:t.jsxs(h,{spacing:3,children:[t.jsx(R,{variant:"h6",children:"Loan Amount Range"}),m&&t.jsx(c,{severity:"error",children:m}),a.map((o,r)=>t.jsxs(h,{direction:"row",spacing:2,children:[t.jsx(g,{label:"From Amount",type:"number",value:o.from,onChange:s=>x(r,"from",s.target.value),fullWidth:!0}),t.jsx(g,{label:"To Amount",type:"number",value:o.to,onChange:s=>x(r,"to",s.target.value),fullWidth:!0})]},r)),t.jsxs(h,{direction:"row",spacing:2,justifyContent:"flex-end",children:[t.jsx(f,{variant:"outlined",onClick:A,children:"+ Add New Row"}),t.jsx(f,{variant:"outlined",component:T,href:l.dashboard.loanamtlist,children:"Cancel"}),t.jsx(f,{variant:"contained",type:"submit",children:"Add Loan Amount"})]})]})})})]})}const E={title:`User View | Dashboard - ${L.appName}`};function W(){return t.jsxs(t.Fragment,{children:[t.jsx(F,{children:t.jsxs("title",{children:[" ",E.title]})}),t.jsx(k,{})]})}export{W as default};
