import{j as e,B as i,T as x,k as f,n as j,r as w,o as y,s as I,A as S,h as F,R as v,p as E,I as k,q as P,H as A,C as R}from"./index-BtB7UOt2.js";import{z as d,u as T,t as B,F as C,L,a as D}from"./zod-DAAV14pM.js";import{I as _}from"./InputAdornment-BvyjvqD-.js";import{T as q}from"./TextField-DxmO3TN0.js";import"./CircularProgress-Dtxp3OJV.js";import"./Select-BfbTOkoI.js";import"./isMuiElement-B37rc9mm.js";import"./formControlState-Dq1zat_P.js";function H({sx:s,icon:t,title:r,description:a,...n}){return e.jsxs(e.Fragment,{children:[t&&e.jsx(i,{component:"span",display:"inline-flex",sx:{mx:"auto",mb:3},children:t}),e.jsxs(i,{gap:1.5,display:"flex",flexDirection:"column",sx:{mb:5,textAlign:"center",whiteSpace:"pre-line",...s},...n,children:[e.jsx(x,{variant:"h5",children:r}),a&&e.jsx(x,{variant:"body2",sx:{color:"text.secondary"},children:a})]})]})}const M=s=>{const t=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,r=/^[0-9]{10}$/;return t.test(s)||r.test(s)},W=d.object({username:d.string().min(1,{message:"Email is required!"}).refine(M,{message:"Username must be a valid email address or a 10-digit mobile number!"}),password:d.string().min(1,{message:"Password is required!"}).min(6,{message:"Password must be at least 6 characters!"}).max(16,{message:"Password must be at most 16 characters!"}),portal_id:d.string().optional()});function g({name:s,label:t,...r}){var l;const{register:a,formState:{errors:n}}=D();return e.jsx(q,{fullWidth:!0,label:t,...a(s),error:!!n[s],helperText:(l=n[s])==null?void 0:l.message,...r})}function $(){f();const s=j(),[t,r]=w.useState(""),{checkUserSession:a}=y(),n=T({resolver:B(W),defaultValues:{username:"admin@gmail.com",password:"Admin@123",portal_id:"3"}}),{handleSubmit:l,formState:{isSubmitting:h}}=n,b=l(async m=>{var c,u,p;try{await I({username:m.username,password:m.password,portal_id:"3"});const o=await(a==null?void 0:a())}catch(o){switch(((u=(c=o==null?void 0:o.response)==null?void 0:c.data)==null?void 0:u.status_code)||((p=o==null?void 0:o.response)==null?void 0:p.status)){case 400:r("Enter a 10-digit mobile number or a valid email address.");break;case 401:r("Incorrect username or password.");break;case 403:r("Forbidden Error.");break;case 404:r("User not found.");break;case 500:r("Internal Server Error, please try again later.");break;default:r("Internal Server Error, please try again later.")}}});return e.jsxs(e.Fragment,{children:[e.jsx(i,{component:"img",src:"/logo/logo-full.png",sx:{borderRadius:"8px",width:270,alignSelf:"center",marginBottom:6}}),e.jsx(H,{title:"Sign in to your account",sx:{textAlign:{xs:"center",md:"left"}}}),!!t&&e.jsx(S,{severity:"error",sx:{mb:3},children:t}),e.jsx(C,{...n,children:e.jsx("form",{onSubmit:b,children:e.jsxs(i,{gap:3,display:"flex",flexDirection:"column",children:[e.jsx(g,{name:"username",label:"Username",placeholder:"Enter your email ID / mobile number",InputLabelProps:{shrink:!0}}),e.jsxs(i,{gap:1.5,display:"flex",flexDirection:"column",children:[e.jsx(F,{component:v,href:E.auth.forgot_password,variant:"body2",color:"inherit",sx:{alignSelf:"flex-end"},children:"Forgot password?"}),e.jsx(g,{name:"password",label:"Password",placeholder:"Enter your password",type:s.value?"text":"password",InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(_,{position:"end",children:e.jsx(k,{onClick:s.onToggle,edge:"end",children:e.jsx(P,{icon:s.value?"solar:eye-bold":"solar:eye-closed-bold"})})})}})]}),e.jsx(L,{fullWidth:!0,color:"inherit",size:"large",type:"submit",variant:"contained",loading:h,loadingIndicator:"Signing in...",children:"Sign in"})]})})})]})}const z={title:`Sign in | ${R.appName}`};function Y(){return e.jsxs(e.Fragment,{children:[e.jsx(A,{children:e.jsxs("title",{children:[" ",z.title]})}),e.jsx($,{})]})}export{Y as default};
