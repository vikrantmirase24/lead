import{r as n,a as w,e as T,j as e,D as U,p as C,aC as P,c as v,R as D,q as d,aY as L,n as S,u as k,I as R,aH as E,H as A,C as B}from"./index-BtB7UOt2.js";import{C as F}from"./confirm-dialog-DGukidWh.js";import{C as H}from"./custom-breadcrumbs-DhW774YS.js";import{u as N,T as V,a as M,b as O,c as W,d as f,e as c,f as _,g as q,C as z}from"./table-pagination-custom-GsxC9MhW.js";import{C as G}from"./Card-DnppY8CG.js";import{T as Y}from"./TextField-DxmO3TN0.js";import{I as $}from"./InputAdornment-BvyjvqD-.js";import{a as J}from"./Select-BfbTOkoI.js";import"./Dialog-DBgaWhmn.js";import"./KeyboardArrowRight-CNgXDUW1.js";import"./FormControlLabel-BSJAInse.js";import"./formControlState-Dq1zat_P.js";import"./isMuiElement-B37rc9mm.js";const j=[{id:"id",label:"Lead ID"},{id:"title",label:"Title"},{id:"actions",label:"Actions",width:88}];function K(){const a=N({defaultRowsPerPage:5}),[o,s]=n.useState([]),[t,h]=n.useState(!1),[u,g]=n.useState(0),[r,p]=n.useState(""),i=n.useCallback(async(l=a.page,x=a.rowsPerPage,I=r)=>{try{h(!0);const m=await w.get(T.user.enduselist,{params:{page:l+1,page_size:x,search:I||""}}),b=m.data.results||[];s(b),g(m.data.count||b.length)}catch(m){console.error("Error fetching End Use:",m)}finally{h(!1)}},[a.page,a.rowsPerPage,r]);n.useEffect(()=>{i()},[i]);const y=l=>{const x=l.target.value;p(x),a.onChangePage(null,0),i(0,a.rowsPerPage,x)};return e.jsxs(U,{children:[e.jsx(H,{heading:"End Use",links:[{name:"Dashboard",href:C.dashboard.root},{name:"End Use"},{name:"View"}],action:e.jsx(P,{direction:"row",spacing:2,children:e.jsx(v,{sx:{mt:5},component:D,variant:"contained",href:C.dashboard.enduseadd,startIcon:e.jsx(d,{icon:"mingcute:add-line"}),children:"Add End Use"})}),sx:{mb:{xs:3,md:3}}}),e.jsxs(G,{children:[e.jsx(P,{direction:"row",spacing:2,sx:{p:2},children:e.jsx(Y,{fullWidth:!0,placeholder:"Search by name or mobile",value:r,onChange:y,InputProps:{startAdornment:e.jsx($,{position:"start",children:e.jsx(d,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),e.jsx(L,{children:e.jsx(V,{sx:{minWidth:800},children:e.jsxs(M,{children:[e.jsx(O,{headLabel:j}),e.jsx(W,{children:t?e.jsx(f,{children:e.jsx(c,{colSpan:j.length,align:"center",children:"Loading..."})}):o.length>0?o.map(l=>e.jsx(Q,{row:l,onDeleteSuccess:()=>i(a.page,a.rowsPerPage,r)},l.id)):e.jsx(f,{children:e.jsx(c,{colSpan:j.length,align:"center",children:"No Data found."})})})]})})}),e.jsx(_,{page:a.page,count:u,rowsPerPage:a.rowsPerPage,onPageChange:a.onChangePage,onRowsPerPageChange:a.onChangeRowsPerPage})]})]})}function Q({row:a,onDeleteSuccess:o}){const s=q(),t=S(),h=k(),[u,g]=n.useState(!1),r=()=>{s.onClose(),h(C.dashboard.enduseedit(a.id))},p=async()=>{try{g(!0),await w.delete(T.user.deleteenduse(a.id)),t.onFalse(),s.onClose(),o==null||o()}catch(i){console.error("Error deleting End Use:",i)}finally{g(!1)}};return e.jsxs(e.Fragment,{children:[e.jsxs(f,{hover:!0,children:[e.jsx(c,{children:a.id}),e.jsx(c,{children:a.title}),e.jsx(c,{align:"right",children:e.jsx(R,{onClick:s.onOpen,children:e.jsx(d,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(z,{open:s.open,anchorEl:s.anchorEl,onClose:s.onClose,children:e.jsxs(J,{children:[e.jsxs(E,{onClick:r,children:[e.jsx(d,{icon:"solar:pen-bold"}),"Edit"]}),e.jsxs(E,{onClick:t.onTrue,sx:{color:"error.main"},children:[e.jsx(d,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})}),e.jsx(F,{open:t.value,onClose:t.onFalse,title:"Delete End Use",content:"Are you sure you want to delete this End Use?",action:e.jsx(v,{variant:"contained",color:"error",onClick:p,disabled:u,children:u?"Deleting...":"Delete"})})]})}const X={title:`User View | Dashboard - ${B.appName}`};function ue(){return e.jsxs(e.Fragment,{children:[e.jsx(A,{children:e.jsxs("title",{children:[" ",X.title]})}),e.jsx(K,{})]})}export{ue as default};
