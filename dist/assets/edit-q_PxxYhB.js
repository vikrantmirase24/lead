import{aZ as E,u as D,r as a,j as e,T as m,D as w,p as d,A as h,aC as p,c as x,R as F,a as f,e as g,H as N,C as T}from"./index-BtB7UOt2.js";import{C as k}from"./custom-breadcrumbs-DhW774YS.js";import{C as q}from"./Card-DnppY8CG.js";import{T as B}from"./TextField-DxmO3TN0.js";import"./Select-BfbTOkoI.js";import"./isMuiElement-B37rc9mm.js";import"./formControlState-Dq1zat_P.js";function I(){const{id:c}=E(),j=D(),[i,u]=a.useState({name:""}),[o,s]=a.useState(""),[l,v]=a.useState(""),[C,b]=a.useState(!0);a.useEffect(()=>{(async()=>{try{const r=(await f.get(g.user.getProduct(c),{})).data.data;u({name:r.name||""})}catch(t){console.error("Error fetching product:",t),s("Failed to load product")}finally{b(!1)}})()},[c]);const y=n=>t=>{const r=t.target.value;u(S=>({...S,[n]:r})),s("")},P=async n=>{var t;if(n.preventDefault(),!i.name.trim()){s("Product name is required");return}try{await f.patch(g.user.editProduct(c),{name:i.name}),v("Product updated successfully!"),setTimeout(()=>{j(d.dashboard.productlist)},1500)}catch(r){console.error("Failed to update product:",r),r.response?(console.error("Server responded with error:",r.response.data),s(((t=r.response.data)==null?void 0:t.message)||"Server error occurred")):r.request?(console.error("No response received:",r.request),s("No response received. Check network or CORS settings.")):(console.error("Error setting up request:",r.message),s(`Unexpected error: ${r.message}`))}};return C?e.jsx(m,{children:"Loading..."}):e.jsxs(w,{children:[e.jsx(k,{heading:"Edit Product",links:[{name:"Dashboard",href:d.dashboard.root},{name:"Product"},{name:"Edit"}],sx:{mb:{xs:3,md:3}}}),!!l&&e.jsx(h,{severity:"success",sx:{mb:2},children:l}),!!o&&e.jsx(h,{severity:"error",sx:{mb:2},children:o}),e.jsx(q,{sx:{p:4},children:e.jsx("form",{onSubmit:P,children:e.jsxs(p,{spacing:3,children:[e.jsx(m,{variant:"h6",children:"Product Details"}),e.jsx(B,{label:"Name",value:i.name,onChange:y("name"),fullWidth:!0,required:!0,error:!!o,helperText:o}),e.jsxs(p,{direction:"row",spacing:2,justifyContent:"flex-end",children:[e.jsx(x,{component:F,href:d.dashboard.productlist,variant:"outlined",children:"Cancel"}),e.jsx(x,{type:"submit",variant:"contained",children:"Save Changes"})]})]})})})]})}const R={title:`User View | Dashboard - ${T.appName}`};function $(){return e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsxs("title",{children:[" ",R.title]})}),e.jsx(I,{})]})}export{$ as default};
