import{r as s,a as g,e as f,j as e,D as P,p as h,aC as p,c as b,R as C,q as r,aY as L,n as A,I as T,aH as j,H as D,C as I}from"./index-BtB7UOt2.js";import{C as v}from"./confirm-dialog-DGukidWh.js";import{C as w}from"./custom-breadcrumbs-DhW774YS.js";import{u as _,T as y,a as E,b as F,c as R,d as x,e as l,f as S,g as k,C as B}from"./table-pagination-custom-GsxC9MhW.js";import{C as H}from"./Card-DnppY8CG.js";import{T as N}from"./TextField-DxmO3TN0.js";import{I as $}from"./InputAdornment-BvyjvqD-.js";import{a as M}from"./Select-BfbTOkoI.js";import"./Dialog-DBgaWhmn.js";import"./KeyboardArrowRight-CNgXDUW1.js";import"./FormControlLabel-BSJAInse.js";import"./formControlState-Dq1zat_P.js";import"./isMuiElement-B37rc9mm.js";const O=[{id:"id",label:"ID"},{id:"name",label:"Loan Amount"},{id:"actions",label:"",width:88}];function V(){const a=_({defaultRowsPerPage:5}),[i,n]=s.useState([]),[t,c]=s.useState(0),[m,d]=s.useState(!1),u=s.useCallback(async()=>{d(!0);try{const o=await g.get(f.user.allLoanAmount,{params:{page:a.page+1,page_size:a.rowsPerPage}});n(o.data.results||[]),c(o.data.count||0)}catch(o){console.error("Fetch failed:",o),n([]),c(0)}d(!1)},[a.page,a.rowsPerPage]);return s.useEffect(()=>{u()},[u]),e.jsxs(P,{children:[e.jsx(w,{heading:"Loan Amount",links:[{name:"Dashboard",href:h.dashboard.root},{name:"Loan Amount"},{name:"List"}],action:e.jsx(p,{direction:"row",spacing:2,children:e.jsx(b,{sx:{mt:5},component:C,variant:"contained",href:h.dashboard.loanamtadd,startIcon:e.jsx(r,{icon:"mingcute:add-line"}),children:"Add Loan"})}),sx:{mb:{xs:3,md:3}}}),e.jsxs(H,{children:[e.jsx(p,{direction:"row",spacing:2,sx:{p:2},children:e.jsx(N,{fullWidth:!0,placeholder:"Search by Loan Amount",InputProps:{startAdornment:e.jsx($,{position:"start",children:e.jsx(r,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),e.jsx(L,{children:e.jsx(y,{sx:{minWidth:800},children:e.jsxs(E,{children:[e.jsx(F,{headLabel:O}),e.jsx(R,{children:m?e.jsx(x,{children:e.jsx(l,{colSpan:3,align:"center",children:"Loading..."})}):i.length>0?i.map(o=>e.jsx(W,{row:o,onDelete:u},o.id)):e.jsx(x,{children:e.jsx(l,{colSpan:3,align:"center",children:"No data found."})})})]})})}),e.jsx(S,{page:a.page,count:t,rowsPerPage:a.rowsPerPage,onPageChange:a.onChangePage,onRowsPerPageChange:a.onChangeRowsPerPage})]})]})}function W({row:a,onDelete:i}){const n=k(),t=A(),c=a.loan_amount_from!==null&&a.loan_amount_to!==null?`${a.loan_amount_from} - ${a.loan_amount_to}`:"N/A",m=async()=>{try{await g.delete(f.user.deleteLoanAmount(a.id)),t.onFalse(),n.onClose(),i()}catch(d){console.error("Failed to delete loan amount:",d)}};return e.jsxs(e.Fragment,{children:[e.jsxs(x,{hover:!0,children:[e.jsx(l,{children:a.id}),e.jsx(l,{children:c}),e.jsx(l,{align:"right",children:e.jsx(T,{onClick:n.onOpen,children:e.jsx(r,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(B,{open:n.open,anchorEl:n.anchorEl,onClose:n.onClose,children:e.jsxs(M,{children:[e.jsxs(j,{component:C,to:h.dashboard.loanamtedit(a.id),children:[e.jsx(r,{icon:"solar:pen-bold",sx:{mr:1}}),"Edit"]}),e.jsxs(j,{onClick:t.onTrue,children:[e.jsx(r,{icon:"solar:trash-bin-trash-bold",sx:{mr:1}}),"Delete"]})]})}),e.jsx(v,{open:t.value,onClose:t.onFalse,title:"Delete Loan Amount",content:"Are you sure you want to delete this loan amount range?",action:e.jsx(b,{variant:"contained",color:"error",onClick:m,children:"Delete"})})]})}const q={title:`User View | Dashboard - ${I.appName}`};function te(){return e.jsxs(e.Fragment,{children:[e.jsx(D,{children:e.jsxs("title",{children:[" ",q.title]})}),e.jsx(V,{})]})}export{te as default};
