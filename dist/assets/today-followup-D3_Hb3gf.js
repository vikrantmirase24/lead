import{r as n,a as L,e as S,j as e,D as I,p as f,aC as F,q as p,aY as E,n as D,u as A,I as N,aH as R,H as k,C as B}from"./index-BtB7UOt2.js";import{C as H}from"./custom-breadcrumbs-DhW774YS.js";import{u as V,T as M,a as U,b as _,c as O,d as m,e as t,f as W,g as q,C as z}from"./table-pagination-custom-GsxC9MhW.js";import{C as G}from"./Card-DnppY8CG.js";import{T as Y}from"./TextField-DxmO3TN0.js";import{I as $}from"./InputAdornment-BvyjvqD-.js";import{a as J}from"./Select-BfbTOkoI.js";import"./KeyboardArrowRight-CNgXDUW1.js";import"./FormControlLabel-BSJAInse.js";import"./formControlState-Dq1zat_P.js";import"./isMuiElement-B37rc9mm.js";const u=[{id:"id",label:"Lead ID"},{id:"name",label:"Name"},{id:"mobile",label:"Mobile No"},{id:"actions",label:"Actions",width:88}];function K(){const a=V({defaultRowsPerPage:5}),[s,i]=n.useState([]),[d,x]=n.useState(!1),[C,w]=n.useState(0),[c,P]=n.useState(""),h=n.useCallback(async(o=a.page,r=a.rowsPerPage,y=c)=>{var g,j,b;try{x(!0);const l=await L.get(S.user.todayfollowup,{params:{page:o+1,page_size:r,search:y||""}}),v=((j=(g=l.data)==null?void 0:g.results)==null?void 0:j.data)||[];i(v),w(((b=l.data)==null?void 0:b.count)||0)}catch(l){console.error("Error fetching today followup:",l)}finally{x(!1)}},[a.page,a.rowsPerPage,c]);n.useEffect(()=>{h()},[h]);const T=o=>{const r=o.target.value;P(r),a.onChangePage(null,0),h(0,a.rowsPerPage,r)};return e.jsxs(I,{children:[e.jsx(H,{heading:"Today FollowUp Leads",links:[{name:"Dashboard",href:f.dashboard.root},{name:"Today FollowUp Leads"},{name:"View"}],sx:{mb:{xs:3,md:3}}}),e.jsxs(G,{children:[e.jsx(F,{direction:"row",spacing:2,sx:{p:2},children:e.jsx(Y,{fullWidth:!0,placeholder:"Search by name or mobile",value:c,onChange:T,InputProps:{startAdornment:e.jsx($,{position:"start",children:e.jsx(p,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}})}),e.jsx(E,{children:e.jsx(M,{sx:{minWidth:800},children:e.jsxs(U,{children:[e.jsx(_,{headLabel:u}),e.jsx(O,{children:d?e.jsx(m,{children:e.jsx(t,{colSpan:u.length,align:"center",children:"Loading..."})}):s.length>0?s.map(o=>e.jsx(Q,{row:o},o.id)):e.jsx(m,{children:e.jsx(t,{colSpan:u.length,align:"center",children:"No leads found."})})})]})})}),e.jsx(W,{page:a.page,count:C,rowsPerPage:a.rowsPerPage,onPageChange:a.onChangePage,onRowsPerPageChange:a.onChangeRowsPerPage})]})]})}function Q({row:a}){const s=q();D();const i=A(),d=()=>{s.onClose(),i(f.dashboard.Allleadview(a.id))};return e.jsxs(e.Fragment,{children:[e.jsxs(m,{hover:!0,children:[e.jsx(t,{children:a.id}),e.jsx(t,{children:a.name}),e.jsx(t,{children:a.mobile_number}),e.jsx(t,{align:"right",children:e.jsx(N,{onClick:s.onOpen,children:e.jsx(p,{icon:"eva:more-vertical-fill"})})})]}),e.jsx(z,{open:s.open,anchorEl:s.anchorEl,onClose:s.onClose,children:e.jsx(J,{children:e.jsxs(R,{onClick:d,children:[e.jsx(p,{icon:"solar:eye-bold"}),"View"]})})})]})}const X={title:`User View | Dashboard - ${B.appName}`};function ce(){return e.jsxs(e.Fragment,{children:[e.jsx(k,{children:e.jsxs("title",{children:[" ",X.title]})}),e.jsx(K,{})]})}export{ce as default};
