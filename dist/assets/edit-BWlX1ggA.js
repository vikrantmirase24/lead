import{u as v,aZ as S,r as a,j as e,D as p,p as d,A as h,aC as x,T as E,c as f,R as P,a as g,e as y,H as N,C as w}from"./index-BtB7UOt2.js";import{C as T}from"./custom-breadcrumbs-DhW774YS.js";import{C as k}from"./CircularProgress-Dtxp3OJV.js";import{C as q}from"./Card-DnppY8CG.js";import{T as F}from"./TextField-DxmO3TN0.js";import"./Select-BfbTOkoI.js";import"./isMuiElement-B37rc9mm.js";import"./formControlState-Dq1zat_P.js";function R(){const j=v(),{id:c}=S(),[i,u]=a.useState(""),[o,t]=a.useState(""),[m,l]=a.useState(""),[D,C]=a.useState(!0);a.useEffect(()=>{(async()=>{try{const s=await g.get(y.user.getPropertyDocument(c));u(s.data.data.name||"")}catch{t("Error fetching property document")}finally{C(!1)}})()},[c]);const b=async n=>{var s;if(n.preventDefault(),!i.trim()){t("Document name is required");return}try{await g.patch(y.user.propertydocumentedit(c),{name:i}),l("Property document updated successfully!"),setTimeout(()=>{j(d.dashboard.propetyDocumentlist)},1500)}catch(r){console.error("Failed to update document:",r),r.response?(console.error("Server responded with error:",r.response.data),t(((s=r.response.data)==null?void 0:s.message)||"Server error occurred")):r.request?(console.error("No response received:",r.request),t("No response received. Check network or CORS settings.")):(console.error("Error setting up request:",r.message),t(`Unexpected error: ${r.message}`)),l("")}};return D?e.jsx(p,{children:e.jsx(k,{})}):e.jsxs(p,{children:[e.jsx(T,{heading:"Edit Property Document",links:[{name:"Dashboard",href:d.dashboard.root},{name:"Property Document"},{name:"Edit"}],sx:{mb:{xs:3,md:3}}}),!!m&&e.jsx(h,{severity:"success",sx:{mb:3},children:m}),!!o&&e.jsx(h,{severity:"error",sx:{mb:2},children:o}),e.jsx(q,{sx:{p:4},children:e.jsx("form",{onSubmit:b,children:e.jsxs(x,{spacing:3,children:[e.jsx(E,{variant:"h6",children:"Property Document Details"}),e.jsx(F,{label:"Document Name",value:i,onChange:n=>u(n.target.value),error:!!o,helperText:o,fullWidth:!0,required:!0}),e.jsxs(x,{direction:"row",spacing:2,justifyContent:"flex-end",children:[e.jsx(f,{component:P,href:d.dashboard.propetyDocumentlist,variant:"outlined",children:"Cancel"}),e.jsx(f,{type:"submit",variant:"contained",children:"Update Document"})]})]})})})]})}const U={title:`User View | Dashboard - ${w.appName}`};function $(){return e.jsxs(e.Fragment,{children:[e.jsx(N,{children:e.jsxs("title",{children:[" ",U.title]})}),e.jsx(R,{})]})}export{$ as default};
